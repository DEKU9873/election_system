# توثيق تكامل نظام الإشعارات مع الباك اند

## هيكل البيانات

عند إرسال إشعار جديد إلى الباك اند، يجب استخدام الهيكل التالي:

```json
{
  "name": "اسم الإشعار",
  "message": "محتوى الإشعار",
  "type": "نوع الإشعار",
  "send_to": "all"
}
```

## المكونات المعدلة

### 1. NotificationButton.jsx

تم تعديل هذا المكون لإرسال البيانات بالتنسيق الصحيح إلى الباك اند. يتم استخدام حقل `name` بدلاً من `title` وإضافة حقل `send_to` بقيمة "all".

### 2. use-notifications-hook.jsx

تم تعديل هذا الملف للتعامل مع البيانات المستلمة من الباك اند وتحويلها إلى التنسيق المناسب للعرض في واجهة المستخدم. يدعم الآن كلا من `title` و `name` للتوافق مع البيانات القديمة والجديدة.

### 3. NotificationToast.jsx و NotificationsPage.jsx

تم تعديل هذه المكونات لعرض الإشعارات بشكل صحيح باستخدام الحقول المستلمة من الباك اند. تم إضافة دعم لعرض التاريخ من حقل `created_at` إذا كان متاحًا.

## مسارات API

- جلب الإشعارات: `GET /api/notifications/`
- إضافة إشعار: `POST /api/notifications/`
- تعليم إشعار كمقروء: `POST /api/notifications/mark-read/:id`
- حذف إشعار: `DELETE /api/notifications/:id`
- حذف جميع الإشعارات: `DELETE /api/notifications/`

## ملاحظات إضافية

- يتم استخدام Redux لإدارة حالة الإشعارات.
- يتم استخدام `createAsyncThunk` للتعامل مع العمليات غير المتزامنة.
- يتم استخدام `subscribeToNotifications` للاشتراك في الإشعارات في الوقت الحقيقي.